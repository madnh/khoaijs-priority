!function(t,i){if("function"==typeof define&&define.amd)define(["require"],function(r){var e=i();return r.specified("khoaijs")&&r(["khoaijs"],function(t){t.Priority=e}),t.Priority=e,e});else{var r=i();t.Khoai&&(t.Khoai.Priority=r),t.Priority=r}}(this,function(){"use strict";function t(){this._priorities={},this._key_mapped={}}function i(t,i,r){for(var e,n,o,p,s=[],u=Object.keys(t._priorities);e=u.shift();)for(p=t._priorities[e],n=0,o=p.length;n<o;n++)if(p[n]&&i(p[n].content,p[n].priority_key)){if(!r)return p[n].priority_key;s.push(p[n].priority_key)}return!!s.length&&s}function r(t){return"[object Array]"===s.call(t)}function e(t){return r(t)?t:[t]}var n,o,p=0;o={PRIORITY_HIGHEST:100,PRIORITY_HIGH:250,PRIORITY_DEFAULT:500,PRIORITY_LOW:750,PRIORITY_LOWEST:1e3,PRIORITY_LEVEL_1:100,PRIORITY_LEVEL_2:200,PRIORITY_LEVEL_3:300,PRIORITY_LEVEL_4:400,PRIORITY_LEVEL_5:500,PRIORITY_LEVEL_6:600,PRIORITY_LEVEL_7:700,PRIORITY_LEVEL_8:800,PRIORITY_LEVEL_9:900,PRIORITY_LEVEL_10:1e3};for(n in o)o.hasOwnProperty(n)&&Object.defineProperty(t,n,{enumerable:!0,value:o[n]});t.prototype.hasPriority=function(t){return this._priorities.hasOwnProperty(t+"")},t.prototype.has=function(t){return this._key_mapped.hasOwnProperty(t)},t.prototype.add=function(i,r){var e,n="priority_key_"+ ++p;return"number"==typeof r&&r===r||(r=t.PRIORITY_DEFAULT),this.hasPriority(r)||(this._priorities[r]=[]),e=this._priorities[r].length,this._priorities[r].push({content:i,priority_key:n}),this._key_mapped[n]={priority:r,index:e},n},t.prototype.findAll=function(t){return i(this,function(i){return t===i},!0)},t.prototype.findAllBy=function(t){return i(this,t,!0)},t.prototype.find=function(t){return i(this,function(i){return t===i},!1)},t.prototype.findBy=function(t){return i(this,t,!1)},t.prototype.hasContent=function(t){return!1!==this.find(t)},t.prototype.hasContentBy=function(t){return!1!==this.findBy(t)},t.prototype.addOnce=function(t,i){var r=this.find(t);return!1!==r?r:this.add(t,i)},t.prototype.get=function(t){if(!this.has(t))return!1;var i=this._key_mapped[t];return this._priorities[i.priority][i.index]},t.prototype.update=function(t,i){var r;return!!this.has(t)&&(r=this._key_mapped[t],this._priorities[r.priority][r.index]=i,!0)},t.prototype.remove=function(t){var i,r,n,o=[];t=e(t);for(i in t)if(t.hasOwnProperty(i)){if(r=t[i],!(n=this._key_mapped[r]))continue;delete this._key_mapped[r],this._priorities[n.priority][n.index]=void 0,o.push(r)}return o},t.prototype.removeBy=function(t){var i=this.findAllBy(t);return!1===i?[]:this.remove(i)},t.prototype.removeByContent=function(t){return this.removeBy(function(i){return t===i})},t.prototype.export=function(t){var i,r,e=[],n=Object.keys(this._priorities);for(n.sort(function(t,i){return t-i});i=n.shift();)for(r in this._priorities[i])this._priorities[i].hasOwnProperty(r)&&(t?e.push({content:this._priorities[i][r].content,priority_key:this._priorities[i][r].priority_key}):e.push(this._priorities[i][r].content));return e};var s=Object.prototype.toString;return t});
//# sourceMappingURL=priority.min.js.map
